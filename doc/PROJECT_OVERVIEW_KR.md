# LLM Chat Logger - 프로젝트 개요

## 요약
LLM Chat Logger는 LLM 플랫폼(Claude.ai, ChatGPT)에서 대화 내용을 추출하여 구조화된 마크다운 파일로 저장하는 Chrome 확장 프로그램입니다. 이 확장 프로그램은 사고 블록, 답변, 아티팩트를 포함한 대화 구조를 보존하면서 깔끔하고 읽기 쉬운 출력을 제공합니다.

## 현재 버전
- **버전**: v4.1.1 (개발 중)
- **상태**: 핵심 기능 작동, Artifact 다운로드 기능 미완성
- **지원 플랫폼**: Claude.ai, ChatGPT

## 주요 기능
1. **멀티 플랫폼 지원**: Claude.ai와 ChatGPT 모두 지원
2. **이중 파일 출력**: 전체 대화와 질문만 포함된 파일 생성
3. **사고/답변 분리**: Claude의 사고 블록을 별도 섹션으로 보존
4. **한국어 키워드 추출**: 한국어 텍스트를 위한 지능형 키워드 추출
5. **아티팩트 감지** (진행 중): Claude 아티팩트 자동 다운로드

## 프로젝트 구조

```
llm-chatlog/
├── llm-chat-logger/        # 현재 v4.x (멀티 플랫폼)
│   ├── content.js          # 메인 로직 (1300줄 이상)
│   ├── sites.js            # 플랫폼별 DOM 설정
│   ├── keywords.js         # 한국어 처리
│   └── manifest.json       # 확장 프로그램 매니페스트
├── claude-chat-logger/     # 레거시 v2.11 (Claude 전용)
├── gpt-chat-logger/        # 독립형 GPT 버전 (사용 중단)
├── doc/                    # 기술 문서
├── _log/                   # 개발 로그
├── _sample/                # 샘플 출력
└── _sessions/              # 세션 로그
```

## 아키텍처 철학

### 모듈식 설계 (v4.x)
v4.x 아키텍처는 관심사를 세 개의 주요 파일로 분리합니다:
- **content.js**: 핵심 로직, 플랫폼 독립적
- **sites.js**: 플랫폼별 DOM 구조와 선택자
- **keywords.js**: 언어 처리 유틸리티

이 설계를 통해 핵심 로직 수정 없이 새로운 플랫폼을 쉽게 추가할 수 있습니다.

### 주요 설계 결정사항
1. **DOM 우선 접근법**: 먼저 추출하고 나중에 처리
2. **빌드 프로세스 없음**: 쉬운 디버깅을 위한 직접 JavaScript
3. **플랫폼 감지**: 도메인 기반 자동 감지
4. **비파괴적 추출**: 원본 콘텐츠 구조 보존

## 핵심 컴포넌트

### 1. 콘텐츠 추출 엔진
- 플랫폼 독립적 추출 로직
- 2단계 처리: 노드 수집 → 콘텐츠 처리
- 마크다운 포맷팅과 코드 블록 보존
- 중첩 구조 처리 (사고 블록, 답변)

### 2. 플랫폼 어댑터 (sites.js)
- 각 플랫폼용 DOM 선택자
- 패턴 정의 (sequential-pairs, data-testid)
- 특수 요소 설정
- UI 패턴 필터

### 3. 키워드 추출 (keywords.js)
- 한국어 불용어 필터링
- 조사 제거
- 빈도 기반 키워드 선택
- 탭 제목 폴백

### 4. 파일 생성
- 이중 출력: 전체 대화 + 질문만
- 타임스탬프 기반 파일명
- 한국어/영어 키워드 통합
- 파일명에 버전 추적

## 데이터 흐름

```
1. 사용자가 저장 트리거 (Cmd/Ctrl+S)
   ↓
2. 현재 플랫폼 감지
   ↓
3. 대화 컨테이너 찾기
   ↓
4. 플랫폼 패턴으로 메시지 추출
   ↓
5. 콘텐츠 처리 (사고/답변 분리)
   ↓
6. 마크다운 생성
   ↓
7. 파일명용 키워드 추출
   ↓
8. 파일 저장
   ↓
9. (선택) 아티팩트 다운로드
```

## 브라우저 호환성
- **Chrome**: 완전 지원 (주요 타겟)
- **Edge**: 작동 예상 (Chromium 기반)
- **Firefox**: 테스트 안 됨
- **Safari**: 지원 안 됨

## 알려진 제한사항
1. 아티팩트 다운로드 기능 작동 안 함 (v4.1.1)
2. ChatGPT Canvas 아직 미지원
3. Deep Research PDF 미처리
4. 자동 업데이트 없음
5. 확장 프로그램 업데이트 후 수동 새로고침 필요

## 성능 특성
- 추출 시간: 일반적인 대화 < 1초
- 메모리 사용: 최소 (DOM 작업만)
- 파일 크기: 대화 길이에 비례
- 외부 의존성 없음

## 보안 고려사항
- 외부 서버로 데이터 전송 없음
- 모든 처리는 로컬에서 수행
- 다운로드 외 영구 저장소 없음
- 읽기 전용 DOM 접근
- 추출된 콘텐츠에서 코드 실행 없음